<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Play SOAP :: Playframework</title>
    <link rel="canonical" href="https://playframework.github.io/play-soap/2.x/index.html">
    <meta name="generator" content="Antora 3.1.5">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="../../_/css/vendor/tabs.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://playframework.github.io">Playframework</a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Search the docs" autofocus>
          <label class="filter checkbox">
            <input type="checkbox" data-facet-filter="component:play-soap" checked> In this project
          </label>
        </div>
      </div>
      <button class="navbar-burger" aria-controls="topbar-nav" aria-expanded="false" aria-label="Toggle main menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <!--
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
    -->
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="play-soap" data-version="2.x">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="index.html">Play SOAP</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="index.html">About</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="highlights.html">What&#8217;s new?</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Plugin</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="plugin/how-to-use.html">How To Use</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="plugin/maven.html">Maven</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="plugin/gradle.html">Gradle</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="plugin/sbt.html">SBT</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="plugin/cli.html">CLI</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Client</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="client/play-soap-client.html">Using a Play SOAP client</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="client/handlers.html">Using JAX WS Handlers</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="client/security.html">Security</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Play SOAP</span>
    <span class="version">2.x</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../play-grpc/0.12.x/index.html">Play gRPC</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../play-grpc/0.12.x/index.html">0.12.x</a>
        </li>
        <li class="version">
          <a href="../../play-grpc/0.11.x/index.html">0.11.x</a>
        </li>
        <li class="version">
          <a href="../../play-grpc/0.10.x/index.html">0.10.x (EOL)</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="index.html">Play SOAP</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">2.x</a>
        </li>
        <li class="version">
          <a href="../1.x/index.html">1.x (EOL)</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link is-current"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Play SOAP</a></li>
    <li><a href="index.html">About</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">2.x</button>
  <div class="version-menu">
    <a class="version is-current" href="index.html">2.x</a>
    <a class="version" href="../1.x/index.html">1.x (EOL)</a>
  </div>
</div>
<div class="edit-this-page"><a href="https://github.com/playframework/play-soap/edit/main/docs/modules/ROOT/pages/index.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Play SOAP</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Play SOAP allows an application to make calls on a remote web service using SOAP. It provides a reactive interface to doing so, making HTTP requests asynchronously and returning promises/futures of the result.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_jax_ws_support"><a class="anchor" href="#_jax_ws_support"></a>JAX WS support</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Play SOAP builds on the JAX WS spec, but doesn&#8217;t implement it exactly. JAX WS does have support for making asynchronous calls, but this support is somewhat clumsy. It requires all asynchronous methods to have an <code>Async</code> suffix, and requires the passing of an <code>AsyncHandler</code> argument to handle the response. This makes it awkward to integrate into an asynchronous framework, since <code>AsyncHandler</code> s do not compose well with other asynchronous constructs. This support could be described as a second class citizen, bolted on to the spec as an afterthought.</p>
</div>
<div class="paragraph">
<p>In contrast, Play SOAP provides asynchronous invocation of SOAP services as a first class citizen. Play SOAP methods all return promises, making them easy to compose with promises from other libraries, and allowing application code to be focussed on business logic, not on wiring asynchronous callbacks together.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_client_proxy"><a class="anchor" href="#_client_proxy"></a>Client proxy</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_proxy_interceptor"><a class="anchor" href="#_proxy_interceptor"></a>Proxy interceptor</h3>
<div class="paragraph">
<p>To implement the proxy, we have to implement our own version of JaxWsClientProxy. This is the CXF JDK proxy interceptor that implements JAX WS interfaces. It&#8217;s here that asynchronous requests are handled, and the logic here is hard coded - it implements the JAX WS requirements, if a method ends in Async and returns something that implements Future then dispatch an asynchronous call. Hence why we have to implement our own to make every method asynchronous regardless of name, and to allow scala Future and Java CompletionStage return types.</p>
</div>
<div class="paragraph">
<p>This class has a lot of logic copied from JaxWsClientProxy, the actual part that has been customised is quite simple, it just creates a promise, and sends an asynchronous callback that redeems the promise.</p>
</div>
</div>
<div class="sect2">
<h3 id="_return_type_binding"><a class="anchor" href="#_return_type_binding"></a>Return type binding</h3>
<div class="paragraph">
<p>When the SOAP bindings are generated, JAXB bindings are generated from the return type. Since this type is a future, we need to tell CXF to use the type it contains.</p>
</div>
<div class="paragraph">
<p>JAX WS provides a Holder type, this is used to allow methods return multiple values, something that is not possible otherwise in Java. It does this by having the first value returned as the return value of the method, and passing additional Holder objects as arguments to the method, whose values are set when the method returns. Although this wasn&#8217;t designed with returning futures in mind, the implementation of it in Apache CXF makes it quite simple to reuse this mechanism to extract the return type, hence this is what we&#8217;re doing. This allows us to completely reuse all the reflection code from Apache CXF that generates the bindings from the interface.</p>
</div>
<div class="paragraph">
<p>In future, we may decide to implement our own reflection code for generating bindings, but for now using the Holder mechanism is good enough. A small amount of hacking is necessary to use it, due to some odd behaviour by the CXF JAX WS support - when the bindings are created, the JAX WS support automatically inserts its own configuration, and implements it in such a way that any configuration that we&#8217;ve added for holders gets overridden. We work around this by overriding a method that eventually injects this configuration but is invoked before the binding is actually done, and after invoking the super for the method, we inject our own configuration to override the default behaviour.</p>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <div id="support">
    <article class="community">
      <h3>Community support</h3>
      <ul>
        <li><a href="//github.com/playframework/playframework/discussions">Discuss Forum</a></li>
        <li><a href="//discord.gg/g5s2vtZ4Fa">Discord</a></li>
        <li><a href="//stackoverflow.com/questions/tagged/playframework">Stackoverflow</a></li>
      </ul>
    </article>
    <article class="professional">
      <h3>Donate to our Collective</h3>
      <ul>
        <li><a href="https://www.playframework.com/sponsors">If you like Play consider becoming a
          sponsor</a></li>
      </ul>
    </article>
  </div>
  <div class="wrapper">
    <div>
      <h3>Play Framework</h3>
      <ul>
        <li><a href="https://www.playframework.com/download">Try Play</a></li>
        <li><a href="https://www.playframework.com/documentation/latest/Tutorials">Tutorials</a>
        </li>
        <li><a href="https://www.playframework.com/documentation">Documentation</a></li>
      </ul>
    </div>
    <div>
      <h3>Community links</h3>
      <ul>
        <li><a href="http://www.indeed.com/jobs?q=%22play+framework%22&l=">Jobs <em>via Indeed</em></a>
        </li>
      </ul>
    </div>
    <div>
      <h3>Code &amp; contribution</h3>
      <ul>
        <li><a href="https://www.playframework.com/code">Code &amp; contributors</a></li>
        <li><a href="//github.com/playframework/playframework/issues">Bug tracker
          <em>GitHub</em></a></li>
        <li><a href="https://www.playframework.com/get-involved">Get involved</a></li>
      </ul>
    </div>
    <div>
      <h3>Social networks</h3>
      <ul>
        <li><a href="//twitter.com/playframework"><span>Twitter</span></a></li>
        <li><a href="//opencollective.com/playframework"><span>Open Collective</span></a></li>
      </ul>
    </div>
  </div>
  <div class="credits">
    <a href="https://www.playframework.com" class="logo"><img
      src="https://www.playframework.com/assets/images/logos/1e960a0ef2cad41e1be353eb6efe5af1-play_reverse.svg"></a>
    <a href="https://lightbend.com" class="partner"><img
      src="https://www.playframework.com/assets/images/logos/525b1d1a1f86ef97a29eded7e434b38c-lightbend-reverse.svg"></a>
    <a href="https://zengularity.com" class="partner"><img
      src="https://www.playframework.com/assets/images/logos/e73318d4c3a11ee57b9f6a1bf823d127-zengularity.png"></a>
    <p>
      Play Framework is released under the Apache 2 License
    </p>
  </div>
  <div class="lb-legal">
    <p>
      &copy; 2011-2022 Lightbend |
      <a href="https://www.lightbend.com/legal/licenses" target="_blank">Licenses</a> |
      <a href="https://www.lightbend.com/legal/terms" target="_blank">Terms</a> |
      <a href="https://www.lightbend.com/legal/privacy" target="_blank">Privacy Policy</a>
    </p>
  </div>
</footer>
<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script async src="../../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script src="../../_/js/vendor/lunr.js"></script>
<script src="../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../.." data-snippet-length="100" data-stylesheet="../../_/css/search.css"></script>
<script async src="../../search-index.js"></script>
  </body>
</html>
