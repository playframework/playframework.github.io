<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Security :: Playframework</title>
    <link rel="canonical" href="https://playframework.github.io/play-soap/2.x/client/security.html">
    <meta name="generator" content="Antora 3.1.5">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <link rel="stylesheet" href="../../../_/css/vendor/tabs.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://playframework.github.io">Playframework</a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Search the docs">
          <label class="filter checkbox">
            <input type="checkbox" data-facet-filter="component:play-soap" checked> In this project
          </label>
        </div>
      </div>
      <button class="navbar-burger" aria-controls="topbar-nav" aria-expanded="false" aria-label="Toggle main menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <!--
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
    -->
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="play-soap" data-version="2.x">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="../index.html">Play SOAP</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">About</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../highlights.html">What&#8217;s new?</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Plugin</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../plugin/how-to-use.html">How To Use</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugin/maven.html">Maven</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugin/gradle.html">Gradle</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugin/sbt.html">SBT</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugin/cli.html">CLI</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Client</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="play-soap-client.html">Using a Play SOAP client</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="handlers.html">Using JAX WS Handlers</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="security.html">Security</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Play SOAP</span>
    <span class="version">2.x</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../play-grpc/0.12.x/index.html">Play gRPC</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../play-grpc/0.12.x/index.html">0.12.x</a>
        </li>
        <li class="version">
          <a href="../../../play-grpc/0.11.x/index.html">0.11.x</a>
        </li>
        <li class="version">
          <a href="../../../play-grpc/0.10.x/index.html">0.10.x (EOL)</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../index.html">Play SOAP</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">2.x</a>
        </li>
        <li class="version">
          <a href="../../1.x/index.html">1.x (EOL)</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Play SOAP</a></li>
    <li>Client</li>
    <li><a href="security.html">Security</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">2.x</button>
  <div class="version-menu">
    <a class="version is-current" href="security.html">2.x</a>
    <a class="version is-missing" href="../../1.x/index.html">1.x (EOL)</a>
  </div>
</div>
<div class="edit-this-page"><a href="https://github.com/playframework/play-soap/edit/main/docs/modules/ROOT/pages/client/security.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Security</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Most security protocols can be implemented in Play SOAP using handlers. For general documentation on handlers, see <a href="handlers.html" class="xref page">here</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_adding_an_authentication_token_to_requests"><a class="anchor" href="#_adding_an_authentication_token_to_requests"></a>Adding an authentication token to requests</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#8217;s say you wanted to make authenticated requests on a web service that expected an authentication token in the request header. To implement this, you can get the request headers from the message context, and add the authentication token there. The HTTP request headers can be loaded by reading the <code>javax.xml.ws.handler.MessageContext.HTTP_REQUEST_HEADERS</code> property. Of course, this should only be done when the message is an outbound message, so the implementation needs to check that as well.</p>
</div>
<div class="sect2">
<h3 id="_adding_an_authentication_token_in_java"><a class="anchor" href="#_adding_an_authentication_token_in_java"></a>Adding an authentication token in Java</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import javax.xml.namespace.QName;
import javax.xml.ws.handler.MessageContext;
import javax.xml.ws.handler.soap.SOAPHandler;
import javax.xml.ws.handler.soap.SOAPMessageContext;
import java.util.*;

public class AuthenticationHandler implements SOAPHandler&lt;SOAPMessageContext&gt; {

    public Set&lt;QName&gt; getHeaders() {
        return null;
    }

    public boolean handleMessage(SOAPMessageContext context) {
        Boolean outbound = (Boolean) context.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);

        if (outbound) {
            // Get headers, create if null
            Map&lt;String, List&lt;String&gt;&gt; headers = (Map) context.get(MessageContext.HTTP_REQUEST_HEADERS);
            if (headers == null) {
                headers = new HashMap&lt;&gt;();
            }

            // Add authentication header
            headers.put("Authentication-Token", Arrays.asList("somesecret"));
            context.put(MessageContext.HTTP_REQUEST_HEADERS, headers);
        }
        return true;
    }

    public boolean handleFault(SOAPMessageContext context) {
        return true;
    }

    public void close(MessageContext context) {
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_adding_an_authentication_token_in_scala"><a class="anchor" href="#_adding_an_authentication_token_in_scala"></a>Adding an authentication token in Scala</h3>
<div class="paragraph">
<p>Note that in the collection types used by the JAX WS API are Java collection types, so care needs to be taken to ensure that these types are used in the Scala code, rather than the Scala collection types. A common way to address this in Scala is to use aliased imports, prepending the letter <code>J</code> to each type, for example, <code>import java.util.{Map &#8658; JMap}</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">import javax.xml.ws.handler.MessageContext
import javax.xml.ws.handler.soap.{SOAPMessageContext, SOAPHandler}

import java.util.{Map =&gt; JMap, List =&gt; JList, HashMap =&gt; JHashMap}
import scala.collection.JavaConverters._

class AuthenticationHandler extends SOAPHandler[SOAPMessageContext] {
  def getHeaders = null

  def handleMessage(context: SOAPMessageContext) = {
    // If this is an outbound message
    if (context.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY)
      .asInstanceOf[java.lang.Boolean]) {

      // Get the request headers, which may be null, in which case create them
      val headers = Option(context.get(MessageContext.HTTP_REQUEST_HEADERS)
        .asInstanceOf[JMap[String, JList[String]]]
      ).getOrElse(new JHashMap[String, JList[String]])

      // Add the authentication token to the headers
      headers += ("Authentication-Token" -&gt; List("somesecret"))

      // Attach the headers to the context
      context += (MessageContext.HTTP_REQUEST_HEADERS -&gt; headers)

    }
    true
  }

  def close(context: MessageContext) = ()

  def handleFault(context: SOAPMessageContext) = true
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <div id="support">
    <article class="community">
      <h3>Community support</h3>
      <ul>
        <li><a href="//github.com/playframework/playframework/discussions">Discuss Forum</a></li>
        <li><a href="//discord.gg/g5s2vtZ4Fa">Discord</a></li>
        <li><a href="//stackoverflow.com/questions/tagged/playframework">Stackoverflow</a></li>
      </ul>
    </article>
    <article class="professional">
      <h3>Donate to our Collective</h3>
      <ul>
        <li><a href="https://www.playframework.com/sponsors">If you like Play consider becoming a
          sponsor</a></li>
      </ul>
    </article>
  </div>
  <div class="wrapper">
    <div>
      <h3>Play Framework</h3>
      <ul>
        <li><a href="https://www.playframework.com/download">Try Play</a></li>
        <li><a href="https://www.playframework.com/documentation/latest/Tutorials">Tutorials</a>
        </li>
        <li><a href="https://www.playframework.com/documentation">Documentation</a></li>
      </ul>
    </div>
    <div>
      <h3>Community links</h3>
      <ul>
        <li><a href="http://www.indeed.com/jobs?q=%22play+framework%22&l=">Jobs <em>via Indeed</em></a>
        </li>
      </ul>
    </div>
    <div>
      <h3>Code &amp; contribution</h3>
      <ul>
        <li><a href="https://www.playframework.com/code">Code &amp; contributors</a></li>
        <li><a href="//github.com/playframework/playframework/issues">Bug tracker
          <em>GitHub</em></a></li>
        <li><a href="https://www.playframework.com/get-involved">Get involved</a></li>
      </ul>
    </div>
    <div>
      <h3>Social networks</h3>
      <ul>
        <li><a href="//twitter.com/playframework"><span>Twitter</span></a></li>
        <li><a href="//opencollective.com/playframework"><span>Open Collective</span></a></li>
      </ul>
    </div>
  </div>
  <div class="credits">
    <a href="https://www.playframework.com" class="logo"><img
      src="https://www.playframework.com/assets/images/logos/1e960a0ef2cad41e1be353eb6efe5af1-play_reverse.svg"></a>
    <a href="https://lightbend.com" class="partner"><img
      src="https://www.playframework.com/assets/images/logos/525b1d1a1f86ef97a29eded7e434b38c-lightbend-reverse.svg"></a>
    <a href="https://zengularity.com" class="partner"><img
      src="https://www.playframework.com/assets/images/logos/e73318d4c3a11ee57b9f6a1bf823d127-zengularity.png"></a>
    <p>
      Play Framework is released under the Apache 2 License
    </p>
  </div>
  <div class="lb-legal">
    <p>
      &copy; 2011-2022 Lightbend |
      <a href="https://www.lightbend.com/legal/licenses" target="_blank">Licenses</a> |
      <a href="https://www.lightbend.com/legal/terms" target="_blank">Terms</a> |
      <a href="https://www.lightbend.com/legal/privacy" target="_blank">Privacy Policy</a>
    </p>
  </div>
</footer>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" data-stylesheet="../../../_/css/search.css"></script>
<script async src="../../../search-index.js"></script>
  </body>
</html>
